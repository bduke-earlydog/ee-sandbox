{exp:channel:entries 
  channel="news"
  require_entry="no"
  limit="1"
}
{__header}
{/exp:channel:entries}
    <section class="header header--bg bg--pattern dark-blue ">
      <div class="container">
        <div class="header__inner">
          <div class="header__content">
            <div class="header__copy">
              <h1>Adventist Health News</h1>
              <p>Made for more</p>
            </div>
          </div>
        </div>
      </div>
    </section>

<?php
// ------------------------------------------
//  menu
// ------------------------------------------
?>

    <style>
      [v-cloak] {
        opacity: 0;
      }
      .slide-fade-enter-active {
        transition: all 1s ease;
      }
      .slide-fade-enter {
        transition: all 1s ease;
      }
      .slide-fade-leave-active {
        transition: all 1s ease;
      }
      .slide-fade-leave-to, .slide-fade-enter-from {
        transform: translateY(20px);
        opacity: 0;
      }
    </style>
    
    
    <div id="app">
      <section class="search search--blog-news lightest-blue">
        <div class="container">
          <input type="hidden" name="thismarket" id="thismarket" value="{if segment_1 != 'news'}{segment_1}{/if}" ref="thismarket">
          <div class="search__inner">
            <div class="control control--year">
              <label class="control__label">Year</label>
              <div class="control__select">
                <select name="year" id="blog_year" @change="onChange">
                  <option value="all">All Years</option>
                  <?php                
                  $current_year = date('Y');
                  $range = range(2019, $current_year);
                  $years = array_combine($range, $range);
                  rsort($years);
                  if(isset($_COOKIE['byear'])) $byear = $_COOKIE['byear'];
                  else $byear = 'all';
                  foreach($years as $year) {
                    if($year == $byear) {
                      ?>
                      <option value="<?=$year?>" selected><?=$year?></option>
                      <?php
                    }
                    else {
                      ?>
                      <option value="<?=$year?>"><?=$year?></option>
                      <?php
                    }
                    ?>
                    <?php
                  }
                  ?>
                </select>
              </div>  
            </div>
            <div class="control control--category">
              <label class="control__label">Category</label>
              <div class="control__select">
                <select name="category" id="blog_category" @change="onChangeCat">
                  <option selected="selected" value="all">All Categories</option>
                  {exp:channel:categories category_group="8" style="linear" sort=“asc” }
                  {if category_name != 'Delete'}
                  <option value="{category_id}|{category_name}">{category_name}</option>
                  {/if}
                  {/exp:channel:categories}               
                </select>
              </div>  
            </div>
            <div class="control control--search">
              <label class="control__label">Search</label>
              <div class="control__search">
                <input class="search__input" id="blog_search" type="search" placeholder="Type here..." ref="blog_search" @keyup.enter="submitSearch">
                <input class="button" id="blog_search_button" type="button" value="Search"  @click="submitSearch">
              </div>
            </div>
          </div>
          <div class="search__filter">
            <div class="control control--clear">
              <input @click="clearAll" class="text-link" id="blog_search_clear" type="button" value="Clear Filters">
            </div>
            <div class="tags">
              <div class="tags__inner">
                <div v-cloak v-if="headline_year != 'all'" class="tag" @click="clearFilter('year')">{{headline_year}}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 365.696 365.696"><path d="M243.188 182.859L356.32 69.727c12.5-12.5 12.5-32.766 0-45.246L341.238 9.398c-12.504-12.504-32.77-12.504-45.25 0L182.859 122.527 69.727 9.375c-12.5-12.5-32.766-12.5-45.246 0L9.375 24.457c-12.5 12.504-12.5 32.77 0 45.25l113.152 113.152L9.398 295.988c-12.504 12.504-12.504 32.77 0 45.25L24.48 356.32c12.5 12.5 32.766 12.5 45.246 0l113.133-113.133L295.988 356.32c12.504 12.5 32.77 12.5 45.25 0l15.082-15.082c12.5-12.504 12.5-32.77 0-45.25zm0 0"/></svg></div>
                <div v-cloak v-if="headline_catname != 'all'" class="tag" @click="clearFilter('cat')">{{headline_catname}}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 365.696 365.696"><path d="M243.188 182.859L356.32 69.727c12.5-12.5 12.5-32.766 0-45.246L341.238 9.398c-12.504-12.504-32.77-12.504-45.25 0L182.859 122.527 69.727 9.375c-12.5-12.5-32.766-12.5-45.246 0L9.375 24.457c-12.5 12.504-12.5 32.77 0 45.25l113.152 113.152L9.398 295.988c-12.504 12.504-12.504 32.77 0 45.25L24.48 356.32c12.5 12.5 32.766 12.5 45.246 0l113.133-113.133L295.988 356.32c12.504 12.5 32.77 12.5 45.25 0l15.082-15.082c12.5-12.504 12.5-32.77 0-45.25zm0 0"/></svg></div>
                <div v-cloak v-if="search_display != 'all'" class="tag" @click="clearFilter('search')">{{search_display}}<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 365.696 365.696"><path d="M243.188 182.859L356.32 69.727c12.5-12.5 12.5-32.766 0-45.246L341.238 9.398c-12.504-12.504-32.77-12.504-45.25 0L182.859 122.527 69.727 9.375c-12.5-12.5-32.766-12.5-45.246 0L9.375 24.457c-12.5 12.504-12.5 32.77 0 45.25l113.152 113.152L9.398 295.988c-12.504 12.504-12.504 32.77 0 45.25L24.48 356.32c12.5 12.5 32.766 12.5 45.246 0l113.133-113.133L295.988 356.32c12.504 12.5 32.77 12.5 45.25 0l15.082-15.082c12.5-12.504 12.5-32.77 0-45.25zm0 0"/></svg></div>
              </div>
            </div>
          </div>
        </div>
      </section>

   
<?php
// ------------------------------------------
//  cards
// ------------------------------------------
?>


    <section class="cards cards--grid">
      <div class="container">

      <div class="results__header" style="display:none;" id="no_results">
        <h3>No results found.</h3>
      </div>    

      <transition-group name="slide-fade" tag="div" class="cards__inner" v-cloak appear>
        <a :href="result.link" class="card card--article" v-if="results.length !== 0" v-for="(result, index) in results" :key="result.index">
          <div class="card__image">
            <img :src="result.image || '/files/core/logos/ah-global.svg'" alt="Adventist Health Logo">
          </div>
          <div class="card__content">
            <span v-html="result.tag"></span>
            <h5 v-html="result.title"></h5>
            <p>{{ result.publish_date }}</p>
          </div>
        </a>
      </transition-group> 

      <!-- 
      <div class="cards__button">
        <div class="button button--outline" @click="loadMore">View More</div>
      </div>
      -->
   
      </div>
    </section>

  </div>
{exp:channel:entries 
  channel="news"
  require_entry="no"
  limit="1"
}

  {_footer}
{/exp:channel:entries}

